<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Personal Brand Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0a;
    --bg2: #111111;
    --bg3: #161616;
    --border: #1e1e1e;
    --green: #00e87a;
    --green-dim: #00e87a22;
    --green-mid: #00e87a55;
    --text: #e8e8e8;
    --text-muted: #555;
    --text-mid: #888;
    --accent: #00e87a;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* TOP BAR */
  .topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 24px;
    height: 52px;
    border-bottom: 1px solid var(--border);
    background: var(--bg);
    flex-shrink: 0;
  }

  .topbar-name {
    font-family: 'Syne', sans-serif;
    font-size: 16px;
    font-weight: 800;
    letter-spacing: -0.02em;
    color: var(--text);
  }

  .topbar-name span {
    color: var(--green);
  }

  .topbar-status {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted);
    font-size: 11px;
    letter-spacing: 0.05em;
  }

  .status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--green);
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .topbar-nav {
    display: flex;
    gap: 4px;
  }

  .nav-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    padding: 5px 12px;
    cursor: pointer;
    letter-spacing: 0.05em;
    border-radius: 2px;
    transition: all 0.15s;
  }

  .nav-btn:hover, .nav-btn.active {
    color: var(--green);
    background: var(--green-dim);
  }

  /* MAIN LAYOUT */
  .main {
    display: grid;
    grid-template-columns: 220px 1fr 280px;
    flex: 1;
    overflow: hidden;
  }

  /* LEFT PANEL */
  .panel-left {
    border-right: 1px solid var(--border);
    background: var(--bg);
    overflow-y: auto;
    padding: 20px 0;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .panel-left::-webkit-scrollbar { width: 0; }

  .filter-section {
    padding: 0 16px 20px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
  }

  .filter-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
  }

  .filter-label {
    font-size: 9px;
    letter-spacing: 0.12em;
    color: var(--text-muted);
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  .filter-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 7px 10px;
    cursor: pointer;
    border-radius: 2px;
    margin-bottom: 2px;
    transition: all 0.15s;
    border: 1px solid transparent;
  }

  .filter-item:hover {
    background: var(--bg3);
  }

  .filter-item.active {
    background: var(--green-dim);
    border-color: var(--green-mid);
  }

  .filter-item.active .filter-name {
    color: var(--green);
  }

  .filter-name {
    color: var(--text-mid);
    font-size: 12px;
    transition: color 0.15s;
  }

  .filter-count {
    font-size: 10px;
    color: var(--text-muted);
    background: var(--bg3);
    padding: 1px 6px;
    border-radius: 10px;
  }

  .filter-item.active .filter-count {
    background: var(--green-dim);
    color: var(--green);
  }

  /* YEAR FILTER */
  .year-filter {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
  }

  .year-btn {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-muted);
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    padding: 3px 8px;
    cursor: pointer;
    border-radius: 2px;
    transition: all 0.15s;
  }

  .year-btn:hover, .year-btn.active {
    border-color: var(--green);
    color: var(--green);
    background: var(--green-dim);
  }

  /* SEARCH */
  .search-wrap {
    padding: 0 16px 16px;
  }

  .search-input {
    width: 100%;
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    padding: 8px 10px;
    border-radius: 2px;
    outline: none;
    transition: border-color 0.15s;
  }

  .search-input::placeholder { color: var(--text-muted); }

  .search-input:focus {
    border-color: var(--green-mid);
  }

  /* CENTER PANEL */
  .panel-center {
    overflow-y: auto;
    background: var(--bg);
    padding: 24px;
  }

  .panel-center::-webkit-scrollbar { width: 3px; }
  .panel-center::-webkit-scrollbar-thumb { background: var(--border); }

  .center-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    margin-bottom: 24px;
  }

  .center-title {
    font-family: 'Syne', sans-serif;
    font-size: 22px;
    font-weight: 700;
    letter-spacing: -0.02em;
  }

  .center-meta {
    font-size: 11px;
    color: var(--text-muted);
  }

  /* CARD GRID */
  .card-grid {
    display: flex;
    flex-direction: column;
    gap: 1px;
  }

  .card {
    background: var(--bg);
    border: 1px solid var(--border);
    padding: 20px 22px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
    animation: fadeIn 0.3s ease forwards;
    opacity: 0;
  }

  .card:nth-child(1) { animation-delay: 0.05s; }
  .card:nth-child(2) { animation-delay: 0.1s; }
  .card:nth-child(3) { animation-delay: 0.15s; }
  .card:nth-child(4) { animation-delay: 0.2s; }
  .card:nth-child(5) { animation-delay: 0.25s; }
  .card:nth-child(6) { animation-delay: 0.3s; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .card::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 2px;
    background: transparent;
    transition: background 0.2s;
  }

  .card:hover {
    background: var(--bg2);
    border-color: #2a2a2a;
  }

  .card:hover::before, .card.selected::before {
    background: var(--green);
  }

  .card.selected {
    background: var(--bg3);
    border-color: #282828;
  }

  .card-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 8px;
  }

  .card-type {
    font-size: 9px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--green);
    background: var(--green-dim);
    padding: 2px 7px;
    border-radius: 1px;
  }

  .card-type.speaker { color: #60c5ff; background: #60c5ff18; }
  .card-type.mentoring { color: #ffc260; background: #ffc26018; }
  .card-type.education { color: #c084fc; background: #c084fc18; }
  .card-type.project { color: #34d399; background: #34d39918; }

  .card-year {
    font-size: 10px;
    color: var(--text-muted);
  }

  .card-title {
    font-family: 'Syne', sans-serif;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    line-height: 1.4;
    margin-bottom: 6px;
    letter-spacing: -0.01em;
  }

  .card-desc {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 12px;
  }

  .tag {
    font-size: 9px;
    padding: 2px 7px;
    border: 1px solid var(--border);
    color: var(--text-muted);
    border-radius: 1px;
    letter-spacing: 0.04em;
  }

  /* RIGHT PANEL */
  .panel-right {
    border-left: 1px solid var(--border);
    background: var(--bg);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
  }

  .panel-right::-webkit-scrollbar { width: 0; }

  .right-top {
    padding: 24px 20px;
    border-bottom: 1px solid var(--border);
  }

  .profile-name {
    font-family: 'Syne', sans-serif;
    font-size: 20px;
    font-weight: 800;
    letter-spacing: -0.03em;
    margin-bottom: 4px;
  }

  .profile-title {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.6;
    margin-bottom: 16px;
  }

  .profile-title span { color: var(--green); }

  .stat-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
    margin-bottom: 16px;
  }

  .stat-box {
    background: var(--bg3);
    border: 1px solid var(--border);
    padding: 12px;
    border-radius: 2px;
  }

  .stat-num {
    font-family: 'Syne', sans-serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--green);
    line-height: 1;
    margin-bottom: 3px;
  }

  .stat-lbl {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  .connect-row {
    display: flex;
    gap: 6px;
  }

  .connect-btn {
    flex: 1;
    background: var(--green);
    border: none;
    color: #000;
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    font-weight: 500;
    padding: 8px 0;
    cursor: pointer;
    letter-spacing: 0.06em;
    border-radius: 1px;
    transition: opacity 0.15s;
  }

  .connect-btn:hover { opacity: 0.85; }

  .connect-btn.outline {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-muted);
  }

  .connect-btn.outline:hover {
    border-color: var(--green-mid);
    color: var(--green);
  }

  /* DETAIL VIEW */
  .detail-view {
    padding: 20px;
    flex: 1;
  }

  .detail-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 200px;
    color: var(--text-muted);
    font-size: 11px;
    text-align: center;
    gap: 8px;
    letter-spacing: 0.04em;
  }

  .detail-empty-line {
    width: 30px;
    height: 1px;
    background: var(--border);
  }

  .detail-label {
    font-size: 9px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 8px;
  }

  .detail-title {
    font-family: 'Syne', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text);
    line-height: 1.4;
    margin-bottom: 12px;
    letter-spacing: -0.01em;
  }

  .detail-body {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.8;
    margin-bottom: 16px;
  }

  .detail-meta-row {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
  }

  .detail-meta-item {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
  }

  .detail-meta-key { color: var(--text-muted); }
  .detail-meta-val { color: var(--text-mid); }

  /* Activity Timeline */
  .activity-section {
    padding: 16px 20px;
    border-top: 1px solid var(--border);
  }

  .activity-title {
    font-size: 9px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 14px;
  }

  .timeline-item {
    display: flex;
    gap: 10px;
    margin-bottom: 12px;
    align-items: flex-start;
  }

  .timeline-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--green);
    margin-top: 4px;
    flex-shrink: 0;
    opacity: 0.6;
  }

  .timeline-content { flex: 1; }

  .timeline-text {
    font-size: 11px;
    color: var(--text-mid);
    line-height: 1.4;
  }

  .timeline-date {
    font-size: 9px;
    color: var(--text-muted);
    margin-top: 2px;
  }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="topbar-name">Alex <span>Chen</span></div>
  <nav class="topbar-nav">
    <button class="nav-btn active" onclick="filterByType('all')">All</button>
    <button class="nav-btn" onclick="filterByType('paper')">Papers</button>
    <button class="nav-btn" onclick="filterByType('project')">Projects</button>
    <button class="nav-btn" onclick="filterByType('speaker')">Speaking</button>
    <button class="nav-btn" onclick="filterByType('mentoring')">Mentoring</button>
    <button class="nav-btn" onclick="filterByType('education')">Education</button>
  </nav>
  <div class="topbar-status">
    <div class="status-dot"></div>
    OPEN TO COLLABORATE
  </div>
</div>

<!-- MAIN -->
<div class="main">

  <!-- LEFT PANEL -->
  <div class="panel-left">
    <div class="search-wrap">
      <input class="search-input" type="text" placeholder="Search..." oninput="searchCards(this.value)" />
    </div>

    <div class="filter-section">
      <div class="filter-label">Category</div>
      <div class="filter-item active" onclick="setFilter(this, 'all')">
        <span class="filter-name">All Work</span>
        <span class="filter-count">12</span>
      </div>
      <div class="filter-item" onclick="setFilter(this, 'paper')">
        <span class="filter-name">Research Papers</span>
        <span class="filter-count">4</span>
      </div>
      <div class="filter-item" onclick="setFilter(this, 'project')">
        <span class="filter-name">Projects</span>
        <span class="filter-count">3</span>
      </div>
      <div class="filter-item" onclick="setFilter(this, 'speaker')">
        <span class="filter-name">Speaking</span>
        <span class="filter-count">2</span>
      </div>
      <div class="filter-item" onclick="setFilter(this, 'mentoring')">
        <span class="filter-name">Mentoring</span>
        <span class="filter-count">2</span>
      </div>
      <div class="filter-item" onclick="setFilter(this, 'education')">
        <span class="filter-name">Education</span>
        <span class="filter-count">1</span>
      </div>
    </div>

    <div class="filter-section">
      <div class="filter-label">Year</div>
      <div class="year-filter">
        <button class="year-btn active" onclick="setYear(this, 'all')">All</button>
        <button class="year-btn" onclick="setYear(this, '2024')">2024</button>
        <button class="year-btn" onclick="setYear(this, '2023')">2023</button>
        <button class="year-btn" onclick="setYear(this, '2022')">2022</button>
        <button class="year-btn" onclick="setYear(this, '2021')">2021</button>
      </div>
    </div>

    <div class="filter-section">
      <div class="filter-label">Topic</div>
      <div class="filter-item" onclick="toggleTag(this, 'ML')">
        <span class="filter-name">Machine Learning</span>
        <span class="filter-count">5</span>
      </div>
      <div class="filter-item" onclick="toggleTag(this, 'NLP')">
        <span class="filter-name">NLP</span>
        <span class="filter-count">3</span>
      </div>
      <div class="filter-item" onclick="toggleTag(this, 'Systems')">
        <span class="filter-name">Systems</span>
        <span class="filter-count">2</span>
      </div>
      <div class="filter-item" onclick="toggleTag(this, 'Ethics')">
        <span class="filter-name">Ethics</span>
        <span class="filter-count">2</span>
      </div>
    </div>

    <div class="filter-section">
      <div class="filter-label">Status</div>
      <div class="filter-item" onclick="setFilter(this, 'status-published')">
        <span class="filter-name">Published</span>
        <span class="filter-count">8</span>
      </div>
      <div class="filter-item" onclick="setFilter(this, 'status-ongoing')">
        <span class="filter-name">Ongoing</span>
        <span class="filter-count">3</span>
      </div>
      <div class="filter-item" onclick="setFilter(this, 'status-archived')">
        <span class="filter-name">Archived</span>
        <span class="filter-count">1</span>
      </div>
    </div>
  </div>

  <!-- CENTER PANEL -->
  <div class="panel-center">
    <div class="center-header">
      <div class="center-title">All Work</div>
      <div class="center-meta" id="result-count">12 entries</div>
    </div>
    <div class="card-grid" id="card-grid"></div>
  </div>

  <!-- RIGHT PANEL -->
  <div class="panel-right">
    <div class="right-top">
      <div class="profile-name">Alex Chen</div>
      <div class="profile-title">Research Scientist & <span>ML Engineer</span><br>MIT CSAIL — Cambridge, MA</div>
      <div class="stat-row">
        <div class="stat-box">
          <div class="stat-num">24</div>
          <div class="stat-lbl">Publications</div>
        </div>
        <div class="stat-box">
          <div class="stat-num">1.2k</div>
          <div class="stat-lbl">Citations</div>
        </div>
        <div class="stat-box">
          <div class="stat-num">38</div>
          <div class="stat-lbl">Talks</div>
        </div>
        <div class="stat-box">
          <div class="stat-num">91</div>
          <div class="stat-lbl">Mentees</div>
        </div>
      </div>
      <div class="connect-row">
        <button class="connect-btn">Contact</button>
        <button class="connect-btn outline">CV</button>
        <button class="connect-btn outline">Scholar</button>
      </div>
    </div>

    <div class="detail-view" id="detail-view">
      <div class="detail-empty">
        <div class="detail-empty-line"></div>
        Select an item to view details
        <div class="detail-empty-line"></div>
      </div>
    </div>

    <div class="activity-section">
      <div class="activity-title">Recent Activity</div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-text">Paper accepted at NeurIPS 2024</div>
          <div class="timeline-date">Dec 2024</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-text">Keynote at MLSys Conference</div>
          <div class="timeline-date">Nov 2024</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-text">New mentoring cohort started</div>
          <div class="timeline-date">Sep 2024</div>
        </div>
      </div>
      <div class="timeline-item">
        <div class="timeline-dot"></div>
        <div class="timeline-content">
          <div class="timeline-text">Launched open-source toolkit v2</div>
          <div class="timeline-date">Aug 2024</div>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
const data = [
  {
    id: 1, type: 'paper', year: '2024',
    title: 'Sparse Attention Patterns in Large-Scale Transformer Models',
    desc: 'An empirical study on emergent sparsity in attention heads across 7B–70B parameter models, with implications for inference efficiency.',
    tags: ['ML', 'NLP', 'Transformers'],
    venue: 'NeurIPS 2024',
    status: 'Published',
    coauthors: 'Liu, Y., Patel, R., Singh, A.'
  },
  {
    id: 2, type: 'project', year: '2024',
    title: 'OpenTrace — Distributed ML Experiment Tracker',
    desc: 'An open-source, lightweight experiment tracking framework designed for multi-node GPU clusters with real-time telemetry dashboards.',
    tags: ['Systems', 'ML', 'Open Source'],
    venue: 'github.com/achen/opentrace',
    status: 'Ongoing',
    coauthors: '14 contributors'
  },
  {
    id: 3, type: 'speaker', year: '2024',
    title: 'Keynote: The Future of Efficient Inference',
    desc: 'Delivered at MLSys 2024. Covered techniques including speculative decoding, quantization, and mixture-of-experts routing for production LLM serving.',
    tags: ['ML', 'Systems'],
    venue: 'MLSys Conference, San Jose',
    status: 'Published',
    coauthors: 'Solo'
  },
  {
    id: 4, type: 'mentoring', year: '2024',
    title: 'PhD Mentoring Cohort — Cohort 6',
    desc: 'Year-long structured mentorship for 12 underrepresented PhD students in ML across 8 universities. Weekly 1:1s and monthly group sessions.',
    tags: ['ML', 'Ethics'],
    venue: 'Virtual + MIT Campus',
    status: 'Ongoing',
    coauthors: '12 mentees'
  },
  {
    id: 5, type: 'paper', year: '2023',
    title: 'Calibrated Uncertainty in Neural Language Models',
    desc: 'Proposes a post-hoc calibration technique using temperature scaling ensembles that reduces ECE by 34% on standard benchmarks.',
    tags: ['NLP', 'ML'],
    venue: 'ICML 2023',
    status: 'Published',
    coauthors: 'Kim, J., Torres, E.'
  },
  {
    id: 6, type: 'education', year: '2023',
    title: 'Foundations of Modern ML Systems — Course Design',
    desc: 'Designed and taught a graduate-level course at MIT covering distributed training, hardware-aware optimization, and deployment pipelines. 140 students enrolled.',
    tags: ['ML', 'Systems'],
    venue: 'MIT 6.840 — Spring 2023',
    status: 'Published',
    coauthors: 'Co-taught with Prof. R. Barzilay'
  },
  {
    id: 7, type: 'project', year: '2023',
    title: 'BenchKit — LLM Evaluation Suite',
    desc: 'Modular benchmarking framework supporting 60+ evaluation tasks with reproducible containers and leaderboard integrations.',
    tags: ['NLP', 'ML'],
    venue: 'github.com/achen/benchkit',
    status: 'Published',
    coauthors: 'Chen, M., Wu, T.'
  },
  {
    id: 8, type: 'paper', year: '2023',
    title: 'Fairness Under Distribution Shift in Clinical NLP',
    desc: 'Analyzes how clinical NLP models degrade on subgroups under temporal distribution shift, and proposes adaptive reweighting strategies.',
    tags: ['NLP', 'Ethics'],
    venue: 'ACL 2023',
    status: 'Published',
    coauthors: 'Obi, N., Mehta, S., Park, J.'
  },
  {
    id: 9, type: 'speaker', year: '2022',
    title: 'Panel: Responsible Deployment of Foundation Models',
    desc: 'Invited panelist at FAccT 2022. Discussed organizational frameworks for responsible AI deployment and red-teaming practices.',
    tags: ['Ethics', 'ML'],
    venue: 'FAccT 2022, Seoul',
    status: 'Published',
    coauthors: 'Panel of 5'
  },
  {
    id: 10, type: 'paper', year: '2022',
    title: 'Continual Learning Without Catastrophic Forgetting via Gradient Projection',
    desc: 'Introduces a gradient orthogonality constraint that preserves prior task performance while enabling efficient new task learning.',
    tags: ['ML'],
    venue: 'ICLR 2022',
    status: 'Published',
    coauthors: 'Zhao, R., Fernandez, C.'
  },
  {
    id: 11, type: 'mentoring', year: '2022',
    title: 'Research Mentorship — Summer Program',
    desc: 'Supervised 6 undergraduate researchers on independent ML research projects over 10 weeks. Two projects led to workshop publications.',
    tags: ['ML', 'Ethics'],
    venue: 'MIT UROP Program',
    status: 'Published',
    coauthors: '6 undergrads'
  },
  {
    id: 12, type: 'project', year: '2021',
    title: 'SparseFlow — Efficient Sparse Tensor Operations',
    desc: 'A CUDA-accelerated library for sparse matrix operations tailored for ML workloads. Archived in favor of newer upstream integrations.',
    tags: ['Systems', 'ML'],
    venue: 'github.com/achen/sparseflow',
    status: 'Archived',
    coauthors: 'Solo'
  }
];

let activeType = 'all';
let activeYear = 'all';
let activeTags = [];
let searchQuery = '';
let selectedId = null;

function renderCards() {
  const grid = document.getElementById('card-grid');
  let filtered = data.filter(d => {
    if (activeType !== 'all') {
      if (activeType.startsWith('status-')) {
        const s = activeType.replace('status-', '');
        if (d.status.toLowerCase() !== s) return false;
      } else if (d.type !== activeType) return false;
    }
    if (activeYear !== 'all' && d.year !== activeYear) return false;
    if (activeTags.length > 0 && !activeTags.every(t => d.tags.includes(t))) return false;
    if (searchQuery) {
      const q = searchQuery.toLowerCase();
      if (!d.title.toLowerCase().includes(q) && !d.desc.toLowerCase().includes(q) && !d.tags.join(' ').toLowerCase().includes(q)) return false;
    }
    return true;
  });

  document.getElementById('result-count').textContent = `${filtered.length} entries`;

  grid.innerHTML = filtered.map(d => `
    <div class="card${selectedId === d.id ? ' selected' : ''}" onclick="selectCard(${d.id})">
      <div class="card-top">
        <span class="card-type ${d.type}">${d.type === 'paper' ? 'Research Paper' : d.type.charAt(0).toUpperCase() + d.type.slice(1)}</span>
        <span class="card-year">${d.year}</span>
      </div>
      <div class="card-title">${d.title}</div>
      <div class="card-desc">${d.desc}</div>
      <div class="card-tags">${d.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
    </div>
  `).join('');
}

function selectCard(id) {
  selectedId = id;
  const d = data.find(x => x.id === id);
  const detail = document.getElementById('detail-view');
  detail.innerHTML = `
    <div class="detail-label">${d.type === 'paper' ? 'Research Paper' : d.type.charAt(0).toUpperCase() + d.type.slice(1)}</div>
    <div class="detail-title">${d.title}</div>
    <div class="detail-body">${d.desc}</div>
    <div class="detail-meta-row">
      <div class="detail-meta-item">
        <span class="detail-meta-key">Venue</span>
        <span class="detail-meta-val">${d.venue}</span>
      </div>
      <div class="detail-meta-item">
        <span class="detail-meta-key">Year</span>
        <span class="detail-meta-val">${d.year}</span>
      </div>
      <div class="detail-meta-item">
        <span class="detail-meta-key">Collaborators</span>
        <span class="detail-meta-val">${d.coauthors}</span>
      </div>
      <div class="detail-meta-item">
        <span class="detail-meta-key">Status</span>
        <span class="detail-meta-val" style="color:var(--green)">${d.status}</span>
      </div>
      <div class="detail-meta-item">
        <span class="detail-meta-key">Topics</span>
        <span class="detail-meta-val">${d.tags.join(', ')}</span>
      </div>
    </div>
  `;
  renderCards();
}

function setFilter(el, type) {
  document.querySelectorAll('.panel-left .filter-item').forEach(f => f.classList.remove('active'));
  el.classList.add('active');
  activeType = type;

  // Sync top nav
  const navMap = { all: 0, paper: 1, project: 2, speaker: 3, mentoring: 4, education: 5 };
  document.querySelectorAll('.nav-btn').forEach((b, i) => {
    b.classList.toggle('active', i === (navMap[type] ?? -1));
  });
  document.querySelector('.center-title').textContent = el.querySelector('.filter-name').textContent;
  renderCards();
}

function filterByType(type) {
  activeType = type;
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');

  // Sync left panel
  const items = document.querySelectorAll('.panel-left .filter-item');
  items.forEach(f => f.classList.remove('active'));
  const typeMap = { all: 'All Work', paper: 'Research Papers', project: 'Projects', speaker: 'Speaking', mentoring: 'Mentoring', education: 'Education' };
  items.forEach(f => {
    if (f.querySelector('.filter-name').textContent === typeMap[type]) f.classList.add('active');
  });
  document.querySelector('.center-title').textContent = typeMap[type] || 'All Work';
  renderCards();
}

function setYear(el, year) {
  document.querySelectorAll('.year-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  activeYear = year;
  renderCards();
}

function toggleTag(el, tag) {
  const idx = activeTags.indexOf(tag);
  if (idx > -1) {
    activeTags.splice(idx, 1);
    el.classList.remove('active');
  } else {
    activeTags.push(tag);
    el.classList.add('active');
  }
  renderCards();
}

function searchCards(val) {
  searchQuery = val;
  renderCards();
}

renderCards();
</script>
</body>
</html>